<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitoring & Performance - Prototype</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .tab-button.active {
            background-color: #3b82f6;
            color: white;
        }
        .metric-card {
            transition: transform 0.2s;
        }
        .metric-card:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <button class="text-gray-600 hover:text-gray-900 flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    Retour
                </button>
                <h1 class="text-2xl font-semibold text-gray-900">Monitoring & Performance</h1>
            </div>
            <div class="flex gap-2">
                <select class="px-3 py-2 border rounded-lg text-sm">
                    <option>Derni√®res 24h</option>
                    <option>7 derniers jours</option>
                    <option>30 derniers jours</option>
                    <option>Personnalis√©</option>
                </select>
                <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                    üì• Exporter rapport
                </button>
            </div>
        </div>
    </header>

    <!-- Vue d'ensemble - KPIs Principaux -->
    <div class="max-w-7xl mx-auto px-6 py-6">
        <!-- Score Global -->
        <div class="bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg shadow-lg p-6 mb-6 text-white">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-blue-100 text-sm font-medium mb-1">Score Global RAGAS</p>
                    <p class="text-5xl font-bold">87.5%</p>
                    <p class="text-blue-100 text-sm mt-2">
                        <span class="inline-flex items-center">
                            <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z"/>
                            </svg>
                            +3.2% vs semaine derni√®re
                        </span>
                    </p>
                </div>
                <div class="text-right">
                    <p class="text-blue-100 text-sm">Bas√© sur</p>
                    <p class="text-3xl font-bold">2,847</p>
                    <p class="text-blue-100 text-sm">requ√™tes analys√©es</p>
                </div>
            </div>
        </div>

        <!-- M√©triques Critiques -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <!-- Faithfulness -->
            <div class="bg-white rounded-lg shadow p-5 border-l-4 border-green-500 metric-card">
                <div class="flex items-center justify-between mb-2">
                    <p class="text-gray-600 text-sm font-medium">Faithfulness üî•</p>
                    <span class="px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-semibold">Excellent</span>
                </div>
                <p class="text-3xl font-bold text-gray-900">92.3%</p>
                <p class="text-xs text-gray-500 mt-1">Anti-hallucination</p>
                <div class="mt-2 flex items-center text-green-600 text-xs">
                    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z"/>
                    </svg>
                    +1.2% cette semaine
                </div>
            </div>

            <!-- Answer Relevance -->
            <div class="bg-white rounded-lg shadow p-5 border-l-4 border-blue-500 metric-card">
                <div class="flex items-center justify-between mb-2">
                    <p class="text-gray-600 text-sm font-medium">Answer Relevance</p>
                    <span class="px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-semibold">Bon</span>
                </div>
                <p class="text-3xl font-bold text-gray-900">88.7%</p>
                <p class="text-xs text-gray-500 mt-1">Pertinence r√©ponses</p>
                <div class="mt-2 flex items-center text-blue-600 text-xs">
                    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z"/>
                    </svg>
                    +0.8% cette semaine
                </div>
            </div>

            <!-- Latency P95 -->
            <div class="bg-white rounded-lg shadow p-5 border-l-4 border-yellow-500 metric-card">
                <div class="flex items-center justify-between mb-2">
                    <p class="text-gray-600 text-sm font-medium">Latency P95</p>
                    <span class="px-2 py-1 bg-yellow-100 text-yellow-700 rounded text-xs font-semibold">√Ä surveiller</span>
                </div>
                <p class="text-3xl font-bold text-gray-900">2.8s</p>
                <p class="text-xs text-gray-500 mt-1">Temps de r√©ponse</p>
                <div class="mt-2 flex items-center text-red-600 text-xs">
                    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z"/>
                    </svg>
                    +0.3s cette semaine
                </div>
            </div>

            <!-- Satisfaction -->
            <div class="bg-white rounded-lg shadow p-5 border-l-4 border-purple-500 metric-card">
                <div class="flex items-center justify-between mb-2">
                    <p class="text-gray-600 text-sm font-medium">Satisfaction</p>
                    <span class="px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs font-semibold">Excellent</span>
                </div>
                <p class="text-3xl font-bold text-gray-900">91.2%</p>
                <p class="text-xs text-gray-500 mt-1">Feedbacks positifs</p>
                <div class="mt-2 flex items-center text-purple-600 text-xs">
                    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z"/>
                    </svg>
                    +2.1% cette semaine
                </div>
            </div>
        </div>

        <!-- Tabs -->
        <div class="bg-white rounded-lg shadow mb-6">
            <div class="border-b border-gray-200">
                <div class="flex">
                    <button class="tab-button active px-6 py-3 font-medium text-gray-700 border-b-2 border-blue-500" onclick="switchTab('retrieval')">
                        Retrieval üì•
                    </button>
                    <button class="tab-button px-6 py-3 font-medium text-gray-500 hover:text-gray-700" onclick="switchTab('context')">
                        Context üìÑ
                    </button>
                    <button class="tab-button px-6 py-3 font-medium text-gray-500 hover:text-gray-700" onclick="switchTab('generation')">
                        Generation üí¨
                    </button>
                    <button class="tab-button px-6 py-3 font-medium text-gray-500 hover:text-gray-700" onclick="switchTab('performance')">
                        Performance ‚ö°
                    </button>
                </div>
            </div>

            <!-- Tab Content: Retrieval -->
            <div id="retrieval" class="tab-content active p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">M√©triques de R√©cup√©ration (Vector Search)</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <div class="bg-gray-50 rounded-lg p-4">
                        <p class="text-sm text-gray-600 mb-1">Precision@5</p>
                        <p class="text-2xl font-bold text-gray-900">84.5%</p>
                        <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                            <div class="bg-blue-600 h-2 rounded-full" style="width: 84.5%"></div>
                        </div>
                    </div>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <p class="text-sm text-gray-600 mb-1">Recall@10</p>
                        <p class="text-2xl font-bold text-gray-900">76.2%</p>
                        <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                            <div class="bg-green-600 h-2 rounded-full" style="width: 76.2%"></div>
                        </div>
                    </div>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <p class="text-sm text-gray-600 mb-1">F1-Score</p>
                        <p class="text-2xl font-bold text-gray-900">80.1%</p>
                        <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                            <div class="bg-purple-600 h-2 rounded-full" style="width: 80.1%"></div>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <div class="bg-gray-50 rounded-lg p-4">
                        <p class="text-sm text-gray-600 mb-1">MRR (Mean Reciprocal Rank) üî•</p>
                        <p class="text-2xl font-bold text-gray-900">0.723</p>
                        <p class="text-xs text-gray-500 mt-1">Position moyenne du 1er doc pertinent: 1.4</p>
                    </div>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <p class="text-sm text-gray-600 mb-1">NDCG@10 (Qualit√© du ranking) üî•</p>
                        <p class="text-2xl font-bold text-gray-900">0.812</p>
                        <p class="text-xs text-gray-500 mt-1">Meilleure m√©trique pour √©valuer le ranking</p>
                    </div>
                </div>

                <div class="bg-white border rounded-lg p-4">
                    <h4 class="font-semibold text-gray-900 mb-3">√âvolution Retrieval Metrics (7 derniers jours)</h4>
                    <canvas id="retrievalChart" height="80"></canvas>
                </div>
            </div>

            <!-- Tab Content: Context -->
            <div id="context" class="tab-content p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">M√©triques de Contexte (Context Building)</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-5 border border-blue-200">
                        <p class="text-sm text-blue-700 font-medium mb-1">Context Precision üî•</p>
                        <p class="text-3xl font-bold text-blue-900">89.4%</p>
                        <p class="text-xs text-blue-600 mt-2">% de docs pertinents dans le contexte final</p>
                        <div class="w-full bg-blue-200 rounded-full h-2 mt-3">
                            <div class="bg-blue-600 h-2 rounded-full" style="width: 89.4%"></div>
                        </div>
                    </div>
                    <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-5 border border-green-200">
                        <p class="text-sm text-green-700 font-medium mb-1">Context Recall üî•</p>
                        <p class="text-3xl font-bold text-green-900">82.7%</p>
                        <p class="text-xs text-green-600 mt-2">% de docs pertinents r√©cup√©r√©s dans le contexte</p>
                        <div class="w-full bg-green-200 rounded-full h-2 mt-3">
                            <div class="bg-green-600 h-2 rounded-full" style="width: 82.7%"></div>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <div class="bg-gray-50 rounded-lg p-4">
                        <p class="text-sm text-gray-600 mb-1">Context Relevance üî•</p>
                        <p class="text-2xl font-bold text-gray-900">90.1%</p>
                        <p class="text-xs text-gray-500 mt-1">Pertinence globale du contexte</p>
                    </div>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <p class="text-sm text-gray-600 mb-1">Context Utilization üî•</p>
                        <p class="text-2xl font-bold text-gray-900">87.3%</p>
                        <p class="text-xs text-gray-500 mt-1">Le LLM utilise bien le contexte</p>
                    </div>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <p class="text-sm text-gray-600 mb-1">Docs dans contexte (moy.)</p>
                        <p class="text-2xl font-bold text-gray-900">4.2</p>
                        <p class="text-xs text-gray-500 mt-1">Apr√®s reranking/filtering</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <div class="bg-white border rounded-lg p-4">
                        <h4 class="font-semibold text-gray-900 mb-3">Context Tokens</h4>
                        <canvas id="contextTokensChart" height="100"></canvas>
                    </div>
                    <div class="bg-white border rounded-lg p-4">
                        <h4 class="font-semibold text-gray-900 mb-3">Distribution Docs par Contexte</h4>
                        <canvas id="contextDocsChart" height="100"></canvas>
                    </div>
                </div>

                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                    <h4 class="font-semibold text-blue-900 mb-2">üí° Insights</h4>
                    <ul class="text-sm text-blue-800 space-y-1">
                        <li>‚Ä¢ Context Precision √©lev√©e (89.4%) ‚Üí Bon reranking/filtering</li>
                        <li>‚Ä¢ Context Utilization √† 87.3% ‚Üí Le LLM utilise bien le contexte fourni</li>
                        <li>‚Ä¢ Moyenne de 4.2 docs/contexte ‚Üí Taille optimale pour √©viter confusion</li>
                    </ul>
                </div>
            </div>

            <!-- Tab Content: Generation -->
            <div id="generation" class="tab-content p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">M√©triques de G√©n√©ration (LLM Response)</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-5 border border-green-200">
                        <p class="text-sm text-green-700 font-medium mb-1">Faithfulness üî•</p>
                        <p class="text-3xl font-bold text-green-900">92.3%</p>
                        <p class="text-xs text-green-600 mt-2">Pas d'hallucinations</p>
                        <div class="mt-3">
                            <span class="px-2 py-1 bg-green-200 text-green-800 rounded text-xs font-semibold">Excellent</span>
                        </div>
                    </div>
                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-5 border border-blue-200">
                        <p class="text-sm text-blue-700 font-medium mb-1">Answer Relevance üî•</p>
                        <p class="text-3xl font-bold text-blue-900">88.7%</p>
                        <p class="text-xs text-blue-600 mt-2">R√©pond √† la question</p>
                        <div class="mt-3">
                            <span class="px-2 py-1 bg-blue-200 text-blue-800 rounded text-xs font-semibold">Bon</span>
                        </div>
                    </div>
                    <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-5 border border-purple-200">
                        <p class="text-sm text-purple-700 font-medium mb-1">Correctness</p>
                        <p class="text-3xl font-bold text-purple-900">85.4%</p>
                        <p class="text-xs text-purple-600 mt-2">vs ground truth</p>
                        <div class="mt-3">
                            <span class="px-2 py-1 bg-purple-200 text-purple-800 rounded text-xs font-semibold">Bon</span>
                        </div>
                    </div>
                </div>

                <div class="bg-white border rounded-lg p-4 mb-6">
                    <h4 class="font-semibold text-gray-900 mb-3">√âvolution Generation Metrics</h4>
                    <canvas id="generationChart" height="80"></canvas>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                        <h4 class="font-semibold text-yellow-900 mb-2">‚ö†Ô∏è Hallucinations d√©tect√©es</h4>
                        <p class="text-2xl font-bold text-yellow-900 mb-2">7.7%</p>
                        <p class="text-sm text-yellow-700">des r√©ponses (220 sur 2847 requ√™tes)</p>
                        <button class="mt-3 px-3 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 text-sm">
                            Voir les cas
                        </button>
                    </div>
                    <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                        <h4 class="font-semibold text-green-900 mb-2">‚úÖ R√©ponses parfaites</h4>
                        <p class="text-2xl font-bold text-green-900 mb-2">79.2%</p>
                        <p class="text-sm text-green-700">Faithfulness + Relevance > 90%</p>
                        <button class="mt-3 px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm">
                            Analyser patterns
                        </button>
                    </div>
                </div>
            </div>

            <!-- Tab Content: Performance -->
            <div id="performance" class="tab-content p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">M√©triques de Performance</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-gray-50 rounded-lg p-4">
                        <p class="text-sm text-gray-600 mb-1">Latency P50</p>
                        <p class="text-2xl font-bold text-gray-900">1.8s</p>
                        <p class="text-xs text-gray-500 mt-1">M√©diane</p>
                    </div>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <p class="text-sm text-gray-600 mb-1">Latency P95 üî•</p>
                        <p class="text-2xl font-bold text-gray-900">2.8s</p>
                        <p class="text-xs text-gray-500 mt-1">95e percentile</p>
                    </div>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <p class="text-sm text-gray-600 mb-1">Latency P99 üî•</p>
                        <p class="text-2xl font-bold text-gray-900">4.2s</p>
                        <p class="text-xs text-gray-500 mt-1">99e percentile</p>
                    </div>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <p class="text-sm text-gray-600 mb-1">Moyenne</p>
                        <p class="text-2xl font-bold text-gray-900">2.1s</p>
                        <p class="text-xs text-gray-500 mt-1">Temps moyen</p>
                    </div>
                </div>

                <div class="bg-white border rounded-lg p-4 mb-6">
                    <h4 class="font-semibold text-gray-900 mb-3">Distribution Latency (derni√®res 24h)</h4>
                    <canvas id="latencyChart" height="80"></canvas>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <div class="bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-5 border border-orange-200">
                        <p class="text-sm text-orange-700 font-medium mb-1">Cost per Query üî•</p>
                        <p class="text-3xl font-bold text-orange-900">$0.0142</p>
                        <div class="mt-3 space-y-1 text-xs text-orange-700">
                            <p>‚Ä¢ Embedding: $0.0001</p>
                            <p>‚Ä¢ Reranking: $0.0021</p>
                            <p>‚Ä¢ LLM Generation: $0.0120</p>
                        </div>
                    </div>
                    <div class="bg-gradient-to-br from-pink-50 to-pink-100 rounded-lg p-5 border border-pink-200">
                        <p class="text-sm text-pink-700 font-medium mb-1">Co√ªt total (30 jours)</p>
                        <p class="text-3xl font-bold text-pink-900">$1,247</p>
                        <div class="mt-3 text-xs text-pink-700">
                            <p>87,850 requ√™tes √ó $0.0142</p>
                            <p class="mt-2">Projection mois prochain: $1,320</p>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-white border rounded-lg p-4">
                        <h4 class="font-semibold text-gray-900 mb-3">Throughput</h4>
                        <p class="text-2xl font-bold text-gray-900 mb-2">12.3 req/s</p>
                        <p class="text-sm text-gray-600">Capacit√© actuelle: 25 req/s</p>
                        <div class="w-full bg-gray-200 rounded-full h-2 mt-3">
                            <div class="bg-green-600 h-2 rounded-full" style="width: 49.2%"></div>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">49% de la capacit√© utilis√©e</p>
                    </div>
                    <div class="bg-white border rounded-lg p-4">
                        <h4 class="font-semibold text-gray-900 mb-3">Taux d'erreur</h4>
                        <p class="text-2xl font-bold text-gray-900 mb-2">0.34%</p>
                        <p class="text-sm text-gray-600">97 erreurs sur 28,470 requ√™tes</p>
                        <div class="mt-3 space-y-1 text-xs text-gray-600">
                            <p>‚Ä¢ Timeout: 42 (43%)</p>
                            <p>‚Ä¢ Rate limit: 31 (32%)</p>
                            <p>‚Ä¢ Autres: 24 (25%)</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Comparaison temporelle -->
        <div class="bg-white rounded-lg shadow p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">√âvolution Globale (30 derniers jours)</h3>
            <canvas id="overallTrendChart" height="60"></canvas>
        </div>
    </div>

    <script>
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Retrieval Chart
        const retrievalCtx = document.getElementById('retrievalChart').getContext('2d');
        new Chart(retrievalCtx, {
            type: 'line',
            data: {
                labels: ['J-7', 'J-6', 'J-5', 'J-4', 'J-3', 'J-2', 'J-1', 'Aujourd\'hui'],
                datasets: [
                    {
                        label: 'Precision@5',
                        data: [82, 83, 84, 83.5, 84, 84.2, 84.3, 84.5],
                        borderColor: 'rgb(59, 130, 246)',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.3
                    },
                    {
                        label: 'NDCG@10',
                        data: [79, 80, 80.5, 80.8, 81, 81.2, 81.5, 81.2],
                        borderColor: 'rgb(168, 85, 247)',
                        backgroundColor: 'rgba(168, 85, 247, 0.1)',
                        tension: 0.3
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: { legend: { position: 'top' } },
                scales: { y: { beginAtZero: false, min: 75, max: 90 } }
            }
        });

        // Context Tokens Chart
        const contextTokensCtx = document.getElementById('contextTokensChart').getContext('2d');
        new Chart(contextTokensCtx, {
            type: 'bar',
            data: {
                labels: ['0-500', '500-1000', '1000-1500', '1500-2000', '2000+'],
                datasets: [{
                    label: 'Nombre de requ√™tes',
                    data: [120, 580, 1240, 720, 187],
                    backgroundColor: 'rgba(59, 130, 246, 0.6)'
                }]
            },
            options: {
                responsive: true,
                plugins: { legend: { display: false } },
                scales: { y: { beginAtZero: true } }
            }
        });

        // Context Docs Chart
        const contextDocsCtx = document.getElementById('contextDocsChart').getContext('2d');
        new Chart(contextDocsCtx, {
            type: 'doughnut',
            data: {
                labels: ['2 docs', '3 docs', '4 docs', '5 docs', '6+ docs'],
                datasets: [{
                    data: [8, 15, 42, 28, 7],
                    backgroundColor: [
                        'rgba(239, 68, 68, 0.8)',
                        'rgba(251, 146, 60, 0.8)',
                        'rgba(34, 197, 94, 0.8)',
                        'rgba(59, 130, 246, 0.8)',
                        'rgba(168, 85, 247, 0.8)'
                    ]
                }]
            },
            options: {
                responsive: true,
                plugins: { legend: { position: 'right' } }
            }
        });

        // Generation Chart
        const generationCtx = document.getElementById('generationChart').getContext('2d');
        new Chart(generationCtx, {
            type: 'line',
            data: {
                labels: ['J-7', 'J-6', 'J-5', 'J-4', 'J-3', 'J-2', 'J-1', 'Aujourd\'hui'],
                datasets: [
                    {
                        label: 'Faithfulness',
                        data: [91, 91.5, 92, 91.8, 92.2, 92.1, 92.3, 92.3],
                        borderColor: 'rgb(34, 197, 94)',
                        backgroundColor: 'rgba(34, 197, 94, 0.1)',
                        tension: 0.3
                    },
                    {
                        label: 'Answer Relevance',
                        data: [87, 87.5, 88, 88.2, 88.5, 88.4, 88.6, 88.7],
                        borderColor: 'rgb(59, 130, 246)',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.3
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: { legend: { position: 'top' } },
                scales: { y: { beginAtZero: false, min: 85, max: 95 } }
            }
        });

        // Latency Chart
        const latencyCtx = document.getElementById('latencyChart').getContext('2d');
        new Chart(latencyCtx, {
            type: 'line',
            data: {
                labels: Array.from({length: 24}, (_, i) => `${i}h`),
                datasets: [
                    {
                        label: 'P50',
                        data: [1.7, 1.8, 1.7, 1.9, 1.8, 2.0, 2.1, 2.2, 2.0, 1.9, 1.8, 1.7, 1.8, 1.9, 2.0, 1.9, 1.8, 1.9, 2.0, 2.1, 1.9, 1.8, 1.7, 1.8],
                        borderColor: 'rgb(34, 197, 94)',
                        tension: 0.3
                    },
                    {
                        label: 'P95',
                        data: [2.5, 2.7, 2.6, 2.8, 2.7, 2.9, 3.0, 3.1, 2.9, 2.8, 2.7, 2.6, 2.7, 2.8, 2.9, 2.8, 2.7, 2.8, 2.9, 3.0, 2.8, 2.7, 2.6, 2.8],
                        borderColor: 'rgb(251, 146, 60)',
                        tension: 0.3
                    },
                    {
                        label: 'P99',
                        data: [3.8, 4.0, 3.9, 4.2, 4.0, 4.3, 4.5, 4.6, 4.3, 4.2, 4.0, 3.9, 4.0, 4.1, 4.3, 4.2, 4.0, 4.1, 4.3, 4.5, 4.2, 4.0, 3.9, 4.2],
                        borderColor: 'rgb(239, 68, 68)',
                        tension: 0.3
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: { legend: { position: 'top' } },
                scales: { y: { beginAtZero: true, title: { display: true, text: 'Secondes' } } }
            }
        });

        // Overall Trend Chart
        const overallCtx = document.getElementById('overallTrendChart').getContext('2d');
        new Chart(overallCtx, {
            type: 'line',
            data: {
                labels: ['J-30', 'J-27', 'J-24', 'J-21', 'J-18', 'J-15', 'J-12', 'J-9', 'J-6', 'J-3', 'Aujourd\'hui'],
                datasets: [
                    {
                        label: 'Score RAGAS',
                        data: [82, 83, 84, 84.5, 85, 85.5, 86, 86.5, 87, 87.2, 87.5],
                        borderColor: 'rgb(59, 130, 246)',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.3,
                        yAxisID: 'y'
                    },
                    {
                        label: 'Satisfaction',
                        data: [87, 88, 88.5, 89, 89.5, 90, 90.2, 90.5, 91, 91.1, 91.2],
                        borderColor: 'rgb(168, 85, 247)',
                        backgroundColor: 'rgba(168, 85, 247, 0.1)',
                        tension: 0.3,
                        yAxisID: 'y'
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: { legend: { position: 'top' } },
                scales: { 
                    y: { beginAtZero: false, min: 75, max: 100, position: 'left', title: { display: true, text: 'Score (%)' } }
                }
            }
        });
    </script>
</body>
</html>
